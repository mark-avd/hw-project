(this["webpackJsonphw-project"]=this["webpackJsonphw-project"]||[]).push([[0],{15:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"e",(function(){return c})),s.d(t,"a",(function(){return r})),s.d(t,"f",(function(){return i})),s.d(t,"d",(function(){return o})),s.d(t,"g",(function(){return l}));var n="http://109.194.37.212:93",a="http://109.194.37.212:93/api/auth/captcha",c="http://109.194.37.212:93/api/auth/",r="http://109.194.37.212:93/api/auth/login",i="http://109.194.37.212:93/api/auth/register",o="http://109.194.37.212:93/api/upload",l="ws://109.194.37.212:2346/"},195:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},2:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(6),a=s(7),c=s(8),r=new(function(){function e(){Object(n.a)(this,e),this.selectedChat=void 0,this.user=void 0,this.person=void 0,this.outFile=void 0,this.users=[],this.messages=[],Object(c.d)(this)}return Object(a.a)(e,[{key:"openMessages",value:function(e,t,s){this.selectedChat=e,this.person={name:t,gender:s}}}]),e}())},200:function(e,t,s){},201:function(e,t,s){},202:function(e,t,s){},203:function(e,t,s){},204:function(e,t,s){},205:function(e,t,s){},206:function(e,t,s){},207:function(e,t,s){},208:function(e,t,s){},209:function(e,t,s){},210:function(e,t,s){},211:function(e,t,s){},212:function(e,t,s){},213:function(e,t,s){},214:function(e,t,s){},215:function(e,t,s){},220:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(44),r=s.n(c),i=s(87),o=s(10),l=s(5),d=(s(94),s(0)),u=function(e){var t=e.children;return Object(d.jsxs)("div",{className:"auth",children:[Object(d.jsx)("div",{className:"auth__form",children:t}),Object(d.jsx)("div",{className:"auth__background"})]})},j=s(3),m=s.n(j),b=s(12),h=s(16),p=s(20),g=s(46),v=s(9),f=(s(196),s(14)),x=s.n(f),O=function(e){var t=e.buttonText,s=e.isDisabled,n=e.type,a=e.isPrimary,c=void 0===a||a,r=e.onClick,i=x()({button_primary:c,button_secondary:!c});return Object(d.jsx)("button",{className:i,disabled:s,type:n,onClick:r,children:t})},_=(s(197),function(e){var t=e.greeting;return Object(d.jsxs)("h1",{className:"heading",children:[t,Object(d.jsx)("span",{className:"heading__app-name",children:" Chatty"}),Object(d.jsx)("span",{className:"heading__exclamation-mark",children:"!"})]})}),N=s(37),w=(s(199),function(e){var t=e.name,s=e.placeholder,n=e.type,a=e.label,c=e.errorText,r=e.isError,i=e.register,o=e.select,l=void 0!==o&&o,u=e.optionList,j=void 0===u?[]:u,m=x()({"form-field__error-text":!0,"form-field__error-text_active":r});return Object(d.jsxs)("label",{htmlFor:t,className:"form-field",children:[Object(d.jsx)("p",{className:"form-field__label-text",children:a}),l?Object(d.jsx)(N.a,{placeholder:s,isError:r,register:i,optionList:j,select:!0}):Object(d.jsx)(N.a,{name:t,type:n,placeholder:s,isError:r,register:i}),!l&&r&&Object(d.jsx)(v.a,{type:"input-error"}),Object(d.jsx)("p",{className:m,children:c})]})}),k=s(15),y=s(30),S=(s(200),function(e){var t,s,a,c,r,i,o=e.captchaURL,u=e.renderRegisterForm,j=e.handleToken,f=Object(n.useState)(),x=Object(l.a)(f,2),N=x[0],S=x[1],C=Object(n.useState)(),I=Object(l.a)(C,2),T=I[0],P=I[1],E=h.b().shape({login:h.d().required("Login is required").min(2,"Login must be at least 2 characters").max(50,"Login must not exceed 50 characters"),password:h.d().required("Password is required").min(2,"Password must be at least 2 characters"),captcha:h.d().required("Enter captcha (12345).").min(5,"12345").max(5,"Must be 5 characters")}),L=Object(p.d)({resolver:Object(g.a)(E),mode:"onChange"}),q=L.register,F=L.handleSubmit,M=L.formState,R=M.errors,W=M.isValid;return Object(d.jsxs)("div",{className:"login-form",children:[Object(d.jsx)("div",{className:"login-form__background-mobile"}),Object(d.jsx)("div",{className:"login-form__logo-icons",children:Object(d.jsx)(v.a,{type:"logo"})}),Object(d.jsx)("span",{className:"login-form__heading",children:Object(d.jsx)(_,{greeting:"Welcome to"})}),Object(d.jsx)("h2",{className:"login-form__subheading",children:"Please, authorize yourself"}),Object(d.jsxs)("form",{onSubmit:F((function(e){var t=function(){var e=Object(b.a)(m.a.mark((function e(t,s){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s,{method:"POST",body:t,credentials:"same-origin"});case 2:if(200!==(n=e.sent).status){e.next=8;break}return e.next=6,n.text();case 6:a=e.sent,j(a);case 8:if(400!==n.status){e.next=14;break}return e.next=11,n.text();case 11:"Error on login or password!"===(c=e.sent)&&S("Wrong login or password"),"Captcha is wrong! Refresh captcha image!"===c&&P("Captcha is wrong");case 14:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();S(void 0),P(void 0),t(Object(y.a)(e),k.a)})),children:[Object(d.jsx)("div",{className:"login-form__input",children:Object(d.jsx)(w,{placeholder:"Input user name",type:"text",label:"User name",errorText:(null===(t=R.login)||void 0===t?void 0:t.message)||N,isError:!W&&!!(null===(s=R.login)||void 0===s?void 0:s.message)||void 0!==N,register:q("login")})}),Object(d.jsx)("div",{className:"login-form__input",children:Object(d.jsx)(w,{placeholder:"Input password",type:"password",label:"Password",errorText:(null===(a=R.password)||void 0===a?void 0:a.message)||N,isError:!W&&!!(null===(c=R.password)||void 0===c?void 0:c.message)||void 0!==N,register:q("password")})}),Object(d.jsxs)("div",{className:"login-form__input",children:[Object(d.jsx)("div",{className:"login-form__captcha-input",children:Object(d.jsx)(w,{placeholder:"Security code",type:"text",label:"Security code",errorText:(null===(r=R.captcha)||void 0===r?void 0:r.message)||T,isError:!W&&!!(null===(i=R.captcha)||void 0===i?void 0:i.message)||void 0!==T,register:q("captcha")})}),Object(d.jsx)("div",{className:"login-form__captcha-img",children:Object(d.jsx)("img",{src:o,alt:"captcha"})})]}),Object(d.jsxs)("div",{className:"login-form__buttons",children:[Object(d.jsx)("div",{className:"login-form__button",children:Object(d.jsx)(O,{type:"submit",buttonText:"Log In",isDisabled:!1})}),Object(d.jsx)("div",{className:"login-form__button",children:Object(d.jsx)(O,{type:"button",buttonText:"Registration",isPrimary:!1,isDisabled:!1,onClick:u})})]})]})]})}),C=(s(201),function(e){var t,s,a,c,r,i,o,u,j,f,x,N,S=e.captchaURL,C=e.renderLoginForm,I=Object(n.useState)(),T=Object(l.a)(I,2),P=T[0],E=T[1],L=h.b().shape({login:h.d().required("Login is required").min(2,"Login must be at least 2 characters").max(50,"Login must not exceed 50 characters"),password:h.d().required("Password is required").min(2,"Password must be at least 2 characters"),password_confirm:h.d().required("Password confirmation is required").when("password",(function(e,t){return e?t.required("Password confirmation is required").oneOf([h.c("password")],"Passwords not match"):t})),name:h.d().required("Name is required").min(2,"Name must be at least 2 characters").max(50),gender_id:h.a().min(1,"Choose your gender"),captcha:h.d().required("Enter captcha").min(5,"Must be 5 characters").max(5,"Must be 5 characters")}),q=Object(p.d)({resolver:Object(g.a)(L),mode:"onTouched"}),F=q.register,M=q.handleSubmit,R=q.reset,W=q.formState,D=W.errors,J=W.isValid,U=Object(n.useState)([]),z=Object(l.a)(U,2),B=z[0],V=z[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(b.a)(m.a.mark((function e(t){var s,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,s.json();case 6:n=e.sent,V(n.genders);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e(k.e)}),[]),Object(d.jsxs)("div",{className:"register-form",children:[Object(d.jsx)("div",{className:"register-form__logo-icons",children:Object(d.jsx)(v.a,{type:"logo"})}),Object(d.jsx)("span",{className:"register-form__heading",children:Object(d.jsx)(_,{greeting:"Sign Up to"})}),Object(d.jsx)("h2",{className:"register-form__subheading",children:"Registration"}),Object(d.jsxs)("form",{onSubmit:M((function(e){var t=function(){var e=Object(b.a)(m.a.mark((function e(t,s){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s,{method:"POST",body:t,credentials:"same-origin"});case 2:if(200===(n=e.sent).status&&R(),400!==n.status){e.next=10;break}return e.next=7,n.text();case 7:a=e.sent,console.error(a),"Captcha is wrong! Refresh captcha image!"===a&&E("Captcha is wrong");case 10:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();t(Object(y.a)(e),k.f)})),children:[Object(d.jsx)("div",{className:"register-form__input",children:Object(d.jsx)(w,{placeholder:"Input user name",type:"text",label:"Create user name",errorText:null===(t=D.login)||void 0===t?void 0:t.message,isError:!J&&!!(null===(s=D.login)||void 0===s?void 0:s.message),register:F("login")})}),Object(d.jsx)("div",{className:"register-form__input",children:Object(d.jsx)(w,{placeholder:"Input password",type:"password",label:"Create password",errorText:null===(a=D.password)||void 0===a?void 0:a.message,isError:!J&&!!(null===(c=D.password)||void 0===c?void 0:c.message),register:F("password")})}),Object(d.jsx)("div",{className:"register-form__input",children:Object(d.jsx)(w,{placeholder:"Password confirmation",type:"password",label:"Password confirmation",errorText:null===(r=D.password_confirm)||void 0===r?void 0:r.message,isError:!J&&!!(null===(i=D.password_confirm)||void 0===i?void 0:i.message),register:F("password_confirm")})}),Object(d.jsx)("div",{className:"register-form__input",children:Object(d.jsx)(w,{placeholder:"Nickname",type:"text",label:"Nickname",errorText:null===(o=D.name)||void 0===o?void 0:o.message,isError:!J&&!!(null===(u=D.name)||void 0===u?void 0:u.message),register:F("name")})}),Object(d.jsx)("div",{className:"register-form__input register-form__input-gender",children:Object(d.jsx)(w,{placeholder:"Your gender",label:"Your gender",errorText:null===(j=D.gender_id)||void 0===j?void 0:j.message,isError:!J&&!!(null===(f=D.gender_id)||void 0===f?void 0:f.message),register:F("gender_id"),select:!0,optionList:B})}),Object(d.jsxs)("div",{className:"register-form__input",children:[Object(d.jsx)("div",{className:"register-form__captcha-input",children:Object(d.jsx)(w,{placeholder:"Security code",type:"text",label:"Security code",errorText:(null===(x=D.captcha)||void 0===x?void 0:x.message)||P,isError:!J&&!!(null===(N=D.captcha)||void 0===N?void 0:N.message)||void 0!==P,register:F("captcha")})}),Object(d.jsx)("div",{className:"register-form__captcha-img",children:Object(d.jsx)("img",{src:S,alt:"captcha"})})]}),Object(d.jsxs)("div",{className:"register-form__buttons",children:[Object(d.jsx)("div",{className:"register-form__button",children:Object(d.jsx)(O,{type:"submit",buttonText:"Register",isDisabled:!1})}),Object(d.jsx)("div",{className:"register-form__button",children:Object(d.jsx)(O,{type:"button",buttonText:"Log In",isPrimary:!1,isDisabled:!1,onClick:C})})]})]})]})}),I=function(e){var t=e.handleToken,s=Object(n.useState)(!1),a=Object(l.a)(s,2),c=a[0],r=a[1];return Object(d.jsx)(u,{children:c?Object(d.jsx)(C,{captchaURL:k.c,renderLoginForm:function(){r(!1)}}):Object(d.jsx)(S,{captchaURL:k.c,renderRegisterForm:function(){r(!0)},handleToken:t})})},T=s(83),P=function(){var e=Object(n.useState)(function(){var e;return null===(e=localStorage.getItem("token"))||void 0===e?void 0:e.slice(1,-1)}()),t=Object(l.a)(e,2),s=t[0],a=t[1];return{setToken:function(e){localStorage.setItem("token",e),a(e)},token:s}},E=(s(215),a.a.lazy((function(){return s.e(3).then(s.bind(null,221))})));var L=function(){var e=P(),t=e.token,s=e.setToken;return Object(d.jsx)(i.a,{children:Object(d.jsxs)(o.d,{children:[t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a.a.Suspense,{fallback:Object(d.jsx)(T.a,{isSuspended:!0}),children:Object(d.jsx)(o.b,{exact:!0,path:"/chat",component:E})}),Object(d.jsx)(o.a,{to:"/chat"})]}),void 0===t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{exact:!0,path:"/",children:Object(d.jsx)(I,{handleToken:function(e){s(e)}})}),Object(d.jsx)(o.a,{to:"/"})]})]})})};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))},30:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));var n=function(e){var t=new FormData;return Object.keys(e).forEach((function(s){return t.append(s,e[s])})),t},a=function(e){var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)}},34:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(6),a=s(7),c=s(15),r=s(8),i=s(2),o=new(function(){function e(){Object(n.a)(this,e),this.socketInstance=void 0,this.socketChat=void 0,this.socketInstance=null,this.socketChat=null}return Object(a.a)(e,[{key:"connect",value:function(){var e,t=this,s=null===(e=localStorage.getItem("token"))||void 0===e?void 0:e.slice(1,-1),n=c.g+"?type=mark&ws_id="+s;this.socketInstance=new WebSocket(n),this.socketInstance.onopen=function(){t.websocketSendType("users_list"),t.websocketSendType("user_data")},this.socketInstance.onmessage=function(e){var s,n,a,c=e.data;"Get param 'ws_id' - is wrong! Please relogin!"===e.data&&(null===(s=t.socketInstance)||void 0===s||s.close(1e3,"Token expired."),localStorage.removeItem("token"));(Object(r.g)((function(){var e,s,n;c.includes("user_data")&&(i.a.user=JSON.parse(c).data,null===(e=t.socketInstance)||void 0===e||e.send("".concat(null===(s=i.a.user)||void 0===s?void 0:s.name,"_").concat(null===(n=i.a.user)||void 0===n?void 0:n.gender,"_connected")));c.includes("users_list")&&(i.a.users=JSON.parse(c).data)})),c.includes("_connected"))&&(c.includes("".concat(null===(n=i.a.user)||void 0===n?void 0:n.name,"_").concat(null===(a=i.a.user)||void 0===a?void 0:a.gender))||t.websocketSendType("users_list"));c.includes("_disconnected")&&t.websocketSendType("users_list")},this.socketInstance.onerror=function(e){console.error(e)},this.socketInstance.onclose=function(){}}},{key:"disconnect",value:function(){var e,t,s,n;null===(e=this.socketInstance)||void 0===e||e.send("".concat(null===(t=i.a.user)||void 0===t?void 0:t.name,"_").concat(null===(s=i.a.user)||void 0===s?void 0:s.gender,"_disconnected")),null===(n=this.socketInstance)||void 0===n||n.close(),localStorage.removeItem("token")}},{key:"chatConnect",value:function(){var e,t=this,s=null===(e=localStorage.getItem("token"))||void 0===e?void 0:e.slice(1,-1);if(i.a.user&&i.a.person){var n=[i.a.user.name,i.a.person.name].sort().join("").toLowerCase(),a=c.g+"?type="+n+"&ws_id="+s;this.socketChat=new WebSocket(a),this.socketChat.onmessage=function(e){var s;"Get param 'ws_id' - is wrong! Please relogin!"===e.data&&(null===(s=t.socketChat)||void 0===s||s.close(1e3,"Token expired."),localStorage.removeItem("token"));var n=JSON.parse(e.data.slice(1,-1));Object(r.g)((function(){"message"===n.type&&i.a.messages.push(n)}))},this.socketChat.onerror=function(e){console.error(e)}}}},{key:"sendMessage",value:function(e){var t,s;null===(t=this.socketChat)||void 0===t||t.send("'".concat(JSON.stringify({type:"message",senderId:null===(s=i.a.user)||void 0===s?void 0:s.name,text:e,file:i.a.outFile,date:new Date}),"'")),Object(r.g)((function(){i.a.outFile=void 0}))}},{key:"websocketSendType",value:function(e){var t;null===(t=this.socketInstance)||void 0===t||t.send(JSON.stringify({type:e}))}}]),e}())},37:function(e,t,s){"use strict";var n=s(47),a=(s(1),s(14)),c=s.n(a),r=(s(198),s(0));t.a=function(e){var t=e.placeholder,s=e.type,a=e.name,i=e.isError,o=e.noBorder,l=e.register,d=e.optionList,u=void 0===d?[]:d,j=e.select,m=void 0!==j&&j,b=e.onChange,h=c()({input:!0,input_errored:i,input_borderless:o});return m?Object(r.jsxs)("select",Object(n.a)(Object(n.a)({className:h,name:a,defaultValue:-1},l),{},{children:[Object(r.jsx)("option",{value:-1,disabled:!0,hidden:!0,children:t}),u.map((function(e,t){var s=Object.values(e),n=s[1].toString().slice(0,1).toUpperCase(),a=s[1].toString().slice(1);return Object(r.jsx)("option",{value:s[0],children:n+a},t)}))]})):Object(r.jsx)("input",Object(n.a)({className:h,id:a,name:a,type:s,placeholder:t,onChange:b},l))}},83:function(e,t,s){"use strict";var n=s(5),a=s(1),c=s(21),r=s(14),i=s.n(r),o=s(9),l=(s(202),s(0)),d=function(e){var t=e.timePassed;return Object(l.jsxs)("p",{className:"last-seen-message",children:["Last seen ",t," ago"]})},u=s(2),j=(s(203),Object(c.a)((function(e){var t=e.closeMessages,s=u.a.person;return Object(l.jsxs)("div",{className:"chat-companion",children:[window.innerWidth<=600&&Object(l.jsxs)("div",{className:"chat-companion__mobile",children:[Object(l.jsx)("span",{className:"chat-companion__icon chat-companion__back-icon",onClick:t,children:Object(l.jsx)(o.a,{type:"arrow-back"})}),Object(l.jsx)("span",{className:"chat-companion__icon",children:Object(l.jsx)(o.a,{type:s?s.gender:"male"})})]}),Object(l.jsxs)("div",{className:"chat-companion__main",children:[Object(l.jsx)("h3",{children:null===s||void 0===s?void 0:s.name}),Object(l.jsx)(d,{timePassed:"3 minutes"})]})]})}))),m=s(3),b=s.n(m),h=s(12),p=s(20),g=s(8),v=s(37),f=s(34),x=s(15),O=(s(204),function(){var e=Object(a.useRef)(null),t=Object(p.d)(),s=t.register,n=t.handleSubmit,c=t.reset,r=function(){var e=Object(h.a)(b.a.mark((function e(t){var s,n,a,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=17;break}return s=t.target.files[0],(n=new FormData).append("0",s),e.next=6,fetch(x.d,{method:"POST",body:n,credentials:"same-origin"});case 6:if(200!==(a=e.sent).status){e.next=12;break}return e.next=10,a.text();case 10:c=e.sent,Object(g.g)((function(){u.a.outFile={name:s.name,size:s.size,url:x.b+c}}));case 12:if(400!==a.status){e.next=17;break}return e.next=15,a.text();case 15:r=e.sent,console.error(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("form",{onSubmit:n((function(e){if(""===e.text)return!1;f.a.sendMessage(e.text),c()})),children:Object(l.jsxs)("div",{className:"chat-input-area",children:[Object(l.jsxs)("div",{className:"chat-input-area__attachment-icon",children:[Object(l.jsx)("input",{className:"chat-input-area__file-input",type:"file",ref:e,onChange:r}),Object(l.jsx)("button",{onClick:function(){var t;null===(t=e.current)||void 0===t||t.click()},children:Object(l.jsx)(o.a,{type:"attachment"})})]}),Object(l.jsx)("div",{className:"chat-input-area__input",children:Object(l.jsx)(v.a,{placeholder:"Write something...",type:"text",noBorder:!0,register:s("text")})}),Object(l.jsx)("div",{className:"chat-input-area__send-icon",children:Object(l.jsx)("button",{children:Object(l.jsx)(o.a,{type:"send"})})})]})})}),_=function(e){var t=e.text;return Object(l.jsx)("p",{children:t})},N=s(30),w=(s(205),function(e){var t=e.text,s=e.isIncoming,n=e.file,a=i()({bubble:!0,bubble_incoming:s,bubble_outgoing:!s});return Object(l.jsxs)("div",{className:a,children:[Object(l.jsx)("div",{className:"bubble__text",children:Object(l.jsx)(_,{text:t})}),n&&Object(l.jsxs)("div",{className:"bubble__file",onClick:function(){n&&n.url&&Object(N.b)(n.url)},children:[Object(l.jsx)(o.a,{type:"file"}),Object(l.jsxs)("div",{className:"bubble__file-info",children:[Object(l.jsx)("p",{className:"bubble__file-name",children:n.name}),Object(l.jsx)(_,{text:((null===n||void 0===n?void 0:n.size)/1024/1024).toString().slice(0,4)+" MB"})]})]})]})}),k=(s(206),Object(c.a)((function(){var e=Object(a.useRef)(null);return Object(l.jsxs)("div",{className:"chat-messages",children:[u.a.messages.map((function(e){var t,s,n,a=e.text,c=e.senderId,r=e.file,o=e.date,d=i()({"chat-messages__message-area":!0,"chat-messages__message-area_outgoing":c===(null===(t=u.a.user)||void 0===t?void 0:t.name),"chat-messages__message-area_incoming":c===(null===(s=u.a.person)||void 0===s?void 0:s.name)}),j=c+o;return Object(l.jsx)("div",{className:d,children:Object(l.jsx)(w,{text:a,isIncoming:c===(null===(n=u.a.person)||void 0===n?void 0:n.name),file:r})},j)})),Object(l.jsx)("div",{ref:e})]})}))),y=(s(207),function(e){var t=e.closeMessages;return Object(l.jsxs)("div",{className:"chat",children:[Object(l.jsx)("div",{className:"chat__companion",children:Object(l.jsx)(j,{closeMessages:t})}),Object(l.jsx)("div",{className:"chat__messages",children:Object(l.jsx)(k,{})}),Object(l.jsx)("div",{className:"chat__input-area",children:Object(l.jsx)(O,{})})]})}),S=(s(208),function(){return Object(l.jsxs)("div",{className:"chat-header",children:[Object(l.jsx)("div",{className:"chat-header__logo-icons",children:Object(l.jsx)(o.a,{type:"logo"})}),Object(l.jsx)("div",{className:"chat-header__profile-icon",children:Object(l.jsx)(o.a,{type:"header-profile"})})]})}),C=(s(209),function(e){var t=e.text;return Object(l.jsx)("p",{className:"text2",children:t})}),I=(s(210),Object(c.a)((function(e){var t,s=e.chatId,c=e.text,r=e.name,d=e.selectedChat,j=e.isOutgoing,m=e.gender,b=Object(a.useState)(!1),h=Object(n.a)(b,2),p=h[0],v=h[1],x=i()({"chat-preview":!0,"chat-preview_active":p});return Object(a.useEffect)((function(){window.innerWidth>600&&v(d===s)}),[d,s]),(null===(t=c)||void 0===t?void 0:t.length)>27&&(c=c.substring(0,27)+"..."),Object(l.jsxs)("div",{className:x,onClick:function(){if(u.a.openMessages(s,r,m),f.a.socketChat||f.a.chatConnect(),localStorage.getItem("messages")){var e=localStorage.getItem("messages");e&&Object(g.g)((function(){u.a.messages=JSON.parse(e)}))}},children:[Object(l.jsx)("div",{className:"chat-preview__user-icon",children:Object(l.jsx)(o.a,{type:m})}),Object(l.jsxs)("div",{className:"chat-preview__user-info",children:[Object(l.jsx)("h4",{className:"chat-preview__user-name",children:r}),Object(l.jsxs)("div",{className:"chat-preview__last-message",children:[j&&Object(l.jsx)("span",{className:"text2",children:"You: "}),Object(l.jsx)(C,{text:c})]})]})]})}))),T=(s(211),function(){return Object(l.jsxs)("div",{className:"no-chats-message",children:[Object(l.jsx)(o.a,{type:"no-chat"}),Object(l.jsx)("p",{className:"no-chats-message__text",children:"There is no other users yet"})]})}),P=(s(212),Object(c.a)((function(){return Object(l.jsx)("div",{className:"chat-sidebar",children:u.a.users&&1!==u.a.users.length?u.a.users.map((function(e,t){var s,n=e.name,a=e.gender;if(n!==(null===(s=u.a.user)||void 0===s?void 0:s.name)){var c=n+a+t;return Object(l.jsx)(I,{chatId:t,name:n,gender:a,selectedChat:u.a.selectedChat,text:"I'll show you who's the boss of this gym.",isOutgoing:!0},c)}})):Object(l.jsx)(T,{})})}))),E=(s(213),function(){return Object(l.jsx)("div",{className:"select-chat-message",children:Object(l.jsx)("p",{children:"Select a chat to start messaging"})})});s(214),t.a=Object(c.a)((function(e){var t=e.isSuspended,s=void 0!==t&&t,c=Object(a.useState)(!1),r=Object(n.a)(c,2),d=r[0],j=r[1],m=Object(a.useState)(!1),b=Object(n.a)(m,2),h=b[0],p=b[1],g=Object(a.useState)(!1),v=Object(n.a)(g,2),f=v[0],x=v[1],O=i()({"chat-template__sidebar":!0,"chat-template__sidebar_hidden":h}),_=i()({"chat-template__chat":!0,"chat-template__chat_visible":f}),N=function(e){e&&j(!0),!e&&j(!1)};return Object(l.jsxs)(l.Fragment,{children:[!d&&Object(l.jsx)(S,{}),Object(l.jsxs)("div",{className:"chat-template",children:[Object(l.jsx)("div",{className:O,onClick:function(){window.innerWidth<=600&&(x(!0),p(!0),N(!0))},children:!s&&Object(l.jsx)(P,{})}),Object(l.jsxs)("div",{className:_,children:[s&&Object(l.jsx)("div",{className:"chat-template__chat-loading",children:Object(l.jsx)(o.a,{type:"loading"})}),!s&&(u.a.person?Object(l.jsx)(y,{closeMessages:function(){window.innerWidth<=600&&(x(!1),p(!1),N(!1))}}):Object(l.jsx)(E,{}))]})]})]})}))},9:function(e,t,s){"use strict";s(1);var n=s.p+"static/media/vector-left.28b4d8b2.svg",a=s.p+"static/media/vector-right.fe1e5f9a.svg",c=s.p+"static/media/attachment-icon.60f1c92a.svg",r=s.p+"static/media/user-icon-male.b2f2a417.svg",i=s.p+"static/media/user-icon-female.d5ca2959.svg",o=s.p+"static/media/error-input-icon.dd5c433f.svg",l=s.p+"static/media/send-icon.246f991e.svg",d=s.p+"static/media/no-chats-icon.2a176518.svg",u=s.p+"static/media/header-profile-icon.ab9333aa.svg",j=s.p+"static/media/back-arrow-icon.d3fd6ea1.svg",m=s.p+"static/media/loading-icon.f6ac7860.svg",b=s.p+"static/media/file-icon.7ac9e975.svg",h=(s(195),s(0));t.a=function(e){var t=e.type;return Object(h.jsxs)(h.Fragment,{children:["logo"===t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:n,alt:"logo icon"}),Object(h.jsx)("img",{src:a,alt:"logo icon"})]}),"attachment"===t&&Object(h.jsx)("img",{src:c,alt:"attachment icon"}),"male"===t&&Object(h.jsx)("img",{src:r,alt:"user icon"}),"female"===t&&Object(h.jsx)("img",{src:i,alt:"user icon"}),"input-error"===t&&Object(h.jsx)("img",{className:"input-error-icon",src:o,alt:"input verification fail icon"}),"send"===t&&Object(h.jsx)("img",{src:l,alt:"send icon"}),"no-chat"===t&&Object(h.jsx)("img",{src:d,alt:"no chats icon"}),"header-profile"===t&&Object(h.jsx)("img",{className:"header-profile",src:u,alt:"profile icon"}),"arrow-back"===t&&Object(h.jsx)("img",{src:j,alt:"arrow back icon"}),"loading"===t&&Object(h.jsx)("img",{src:m,alt:"loading icon"}),"file"===t&&Object(h.jsx)("img",{src:b,alt:"file icon"})]})}},94:function(e,t,s){}},[[220,1,2]]]);
//# sourceMappingURL=main.81b38a8f.chunk.js.map